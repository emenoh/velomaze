
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Bootstrap, from Twitter</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <style type="text/css">
      #maze {
        position: absolute;
        top: 30px;
        left: 30px;
        right: 30px;
        bottom: 30px;
        border: 1px solid red;
        background-image: url(/images/maze.png);
        background-size: cover;
      }
      #status {
        border: 1px solid red;
        position: absolute;
        height: 20px;
        left: 30px;
        right: 30px;
        bottom: 0;
      }
      .ball {
        position: absolute;
        left: -100px;
        top: -100px;
        background-color: black;
        border-radius: 5px;
        -webkit-border-radius: 5px;
        -moz-border-radius: 5px;
        border-radius: 35px;
        -moz-border-radius: 35px;
        -webkit-border-radius: 35px;
      }
    </style>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
      var ball;
      var maze;
      $(function() {
          var frontBackAngle = 0;
          var leftRightAngle = 0;
          maze = {
            element: $('#maze'),
            rows: 10,
            cols: 10,
            getSquareWidth: function() {
                return maze.element.width() / maze.cols;
            },
            getSquareHeigth: function() {
                return maze.element.height() / maze.rows;
            }
          };
          ball = {
            x: 0.5,
            y: maze.rows/2.0,
            vx: 0,
            vy: 0
          };
          var walls = [
            {x: 0}
          ];
          var frame = 0;
          function update() {
            $('#status').html('Frame: ' + frame + ', width= ' + maze.getSquareWidth());
            if (!ball.element) {
              ball.element = $('<div class="ball" />');
              ball.element.css('width', (maze.getSquareWidth() / 2) + 'px');
              ball.element.css('height', (maze.getSquareHeigth() / 2) + 'px');
              $('body').append(ball.element);
            }
            ball.vx += Math.sin(leftRightAngle)/20.0;
            ball.vy += Math.sin(frontBackAngle)/20.0;
            ball.vx *= 0.85;
            ball.vy *= 0.85;
            ball.x += ball.vx;
            ball.y += ball.vy;
            ball.element.css('left', (ball.x * maze.getSquareWidth()) + 'px');
            ball.element.css('top', (ball.y * maze.getSquareHeigth()) + 'px');
            frame++;
          };

          if (window.DeviceOrientationEvent) {
            window.addEventListener('deviceorientation', function(eventData) {
                leftRightAngle = eventData.gamma /90.0*Math.PI/2;
                frontBackAngle = eventData.beta /90.0*Math.PI/2;
            }, false);
          } else if (window.OrientationEvent) {
            window.addEventListener('MozOrientation', function(eventData) {
                leftRightAngle = eventData.x * Math.PI/2
                frontBackAngle = eventData.y * Math.PI/2;
            }, false);
          } else {
            $('#status').html('Your device does not support orientation reading. Please use Android 4.0 or later, iOS (MBP laptop is fine) or similar platform.');
          }

          window.setInterval(function() { update(); }, 100);
      });
    </script>
  </head>

  <body>
    <div id="maze">
    </div>
    <div id="status"></div>
  </body>
</html>
